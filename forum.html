<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Minecraft - Forum / Tickets</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-minecraft minecraft-bg">
    <div id="page-transition" class="transition-hidden"></div>
    <header>
        <nav class="navbar">
            <div class="logo">Whospace Minecraft</div>
            <ul class="nav-links">
                <li><a href="../index.html">Retour au HUB</a></li>
                <li><a href="accueil.html">Accueil</a></li>
                <li><a href="qui-sommes-nous.html">Qui sommes-nous</a></li>
                <li><a href="boutique.html">Boutique</a></li>
                <li><a href="forum.html">Forum</a></li>
                <li><a href="https://discord.gg/GjbkUGGXrD" target="_blank">Discord</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="server-chat">
            <h1>Forum & Tickets</h1>
            <p>Ouvrez un thread ou gérez les tickets ici.</p>

            <div class="thread-controls">
                <form id="threadForm" class="thread-form">
                    <input type="text" name="title" placeholder="Titre du thread" required>
                    <textarea name="content" placeholder="Décrivez votre sujet..." required></textarea>
                    <div class="form-actions">
                        <button class="btn primary" type="submit">Créer un thread</button>
                    </div>
                </form>
            </div>

            <div class="thread-list" id="threadList">
                <article class="thread-card">
                    <h3>Annonce: Maintenance planifiée</h3>
                    <p class="muted">Par l'équipe • 2 jours</p>
                    <p>Nous effectuerons une maintenance le samedi à 02:00 UTC...</p>
                    <div class="thread-actions">
                        <button class="btn small">Voir</button>
                        <button class="btn small admin-only">Modérer</button>
                    </div>
                </article>
            </div>
        </section>
    </main>

    <script>
        // Prototype: créer un thread côté client
        const threadForm = document.getElementById('threadForm');
        const threadList = document.getElementById('threadList');
        threadForm.addEventListener('submit', e=>{
            e.preventDefault();
            const data = new FormData(threadForm);
            const title = data.get('title'), content = data.get('content');
            const art = document.createElement('article');
            art.className = 'thread-card';
            art.innerHTML = `<h3>${title}</h3><p class="muted">Par vous • À l'instant</p><p>${content}</p><div class="thread-actions"><button class="btn small">Voir</button><button class="btn small admin-only">Modérer</button></div>`;
            threadList.prepend(art);
            threadForm.reset();
        });
    </script>

    <!-- Firebase SDKs + app -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="firebase-app.js"></script>
    <script>if(window.whospaceApp) window.whospaceApp.initPage('forum');</script>

    <!-- updated transition script path -->
    <script src="javascript/transition.js"></script>
    <script src="javascript/blocks.js"></script>
    <audio id="plopSound" src="sounds/plop.mp3" preload="auto"></audio>
</body>
</html>